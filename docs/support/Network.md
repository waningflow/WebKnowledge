# 网络

## 网络模型

- TCP/IP 模型
  - 应用层，DNS、FTP、HTTP、SMTP、TELNET、IRC、WHOIS
  - 传输层，TCP、UDP
  - 网间层，ICMP、IP
  - 网络接口层，ARP、RARP
- OSI 模型
  - 应用层：各种应用软件，包括 Web 应用
  - 标识层：数据格式标识，基本压缩加密功能
  - 会话层：控制应用程序之间会话能力；如不同软件数据分发给不同软件
  - 传输层：端到端传输数据的基本功能；如 TCP、UDP
  - 网络层：定义 IP 编址，定义路由功能；如不同设备的数据转发
  - 数据链路层：定义数据的基本格式，如何传输，如何标识；如网卡 MAC 地址
  - 物理层：底层数据传输，如网线；网卡标准

## UDP

- 面向报文，只是报文的搬运工，不会对报文进行任何拆分和拼接操作
  - 在发送端，应用层将数据传递给传输层的 UDP 协议，UDP 只会给数据增加一个 UDP 头标识下是 UDP 协议，然后就传递给网络层了
  - 在接收端，网络层将数据传递给传输层，UDP 只去除 IP 报文头就传递给应用层，不会任何拼接操作
- 不可靠性
  - 无连接，通信不需要建立和断开连接
  - 不会备份数据，不关心能不能收到
  - 没有拥塞控制，一直会以恒定的速度发送数据
- 头部开销小，传输高效
- 提供了单播，多播，广播的功能

## TCP

## HTTP

## Cookie

简述

> 服务器发送到浏览器并保存在本地的数据，请求同一服务器时会被携带

要点

## Https

## XSS

简述

> 跨站脚本攻击

要点

- 类型
  - 反射型 XSS
    - XSS 代码出现在 URL 中，诱导点击，提交给服务端。服务端返回的内容，也带上了这段 XSS 代码，最后浏览器执行 XSS 代码`http://xxx.com?x=<script>alert(document.cookie)</script>`
  - 存储型 XSS
    - 提交的 XSS 代码会存储在服务器端
  - DOM XSS
    - 不需要服务端参与，前端代码漏洞导致
- 防御手段
  - 过滤转义输入输出
    - 对于引号，尖括号，斜杠等特殊字符进行转义，比如`js-xss`
  - 避免使用 eval，new Function 等执行字符串的方法，除非确定字符串和用户输入无关
  - 使用 innerHTML，document.write 的时候，如果数据是用户输入的，那么需要对关键字符都进行过滤与转义
  - 对于非客户端 cookie，比如保存用户凭证的 session，务必标识为 http only
  - 主动防御，当发现页面有 XSS 攻击时候，主动上报。对事件和脚本拦截。判断是否有恶意代码

## CSP

## CSRF

简述

> 跨站请求伪造,利用用户的登录态发起恶意请求

要点

- XSS 利用的是用户对指定网站的信任，CSRF 利用的是网站对用户网页浏览器的信任
- 防御手段
  - 验证 Referer，判断该请求是否为第三方网站发起的
  - 对 Cookie 设置 SameSite 属性，设置 Cookie 不随着跨域请求发送（不是所有浏览器都兼容）
  - 关键请求使用验证码或者 token 机制
  - 避免登录的 session 长时间存储在客户端中
